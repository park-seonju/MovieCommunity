{"remainingRequest":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\src\\components\\ReviewDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\src\\components\\ReviewDetail.vue","mtime":1621586447861},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm4gew0KICAgICAgY29tbWVudDonJywNCiAgICAgIGNvbW1lbnRzOltdLA0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6ew0KICAgIHJldmlldygpew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNlbGVjdFJldmlldw0KICAgIH0sDQogICAgbW92aWVUaXRsZSgpew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1vdmllc1t0aGlzLnJldmlldy5tb3ZpZV0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KICAgIHNldFRva2VuOiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd3QnKQ0KICAgICAgY29uc3QgY29uZmlnID0gew0KICAgICAgICBBdXRob3JpemF0aW9uOiBgSldUICR7dG9rZW59YA0KICAgICAgfQ0KICAgICAgcmV0dXJuIGNvbmZpZw0KICAgIH0sDQogICAgb25EZWxldGUoKXsNCiAgICAgIC8vIDEuIOqyjOyLnOusvCDrsojtmLjssL7quLANCiAgICAgIGNvbnN0IHJldmlld19pZCA9IHRoaXMucmV2aWV3LmlkDQogICAgICBjb25zdCBtb3ZpZV9pZCA9IHRoaXMucmV2aWV3Lm1vdmllDQogICAgICAvLyAyLiBheGlvcyDsmpTssq3rs7TrgrTquLANCiAgICAgIGF4aW9zKHsNCiAgICAgICAgbWV0aG9kOidERUxFVEUnLA0KICAgICAgICB1cmw6IGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvcmV2aWV3LyR7bW92aWVfaWR9LyR7cmV2aWV3X2lkfS9kZWxldGUvYCwNCiAgICAgICAgaGVhZGVyczogdGhpcy5zZXRUb2tlbigpLA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzID0+ew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTonQ29tbXVuaXR5J30pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgfSkNCiAgICB9LA0KDQogICAgQ29tbWVudERlbGV0ZShjb21tZW50aWQpew0KICAgICAgLy8gMS4g6rKM7Iuc66y8IOuyiO2YuOywvuq4sA0KICAgICAgY29uc3QgcmV2aWV3X2lkID0gdGhpcy5yZXZpZXcuaWQNCiAgICAgIGNvbnN0IGNvbW1lbnRfaWQgPSBjb21tZW50aWQNCiAgICAgIC8vIDIuIGF4aW9zIOyalOyyreuztOuCtOq4sA0KICAgICAgYXhpb3Moew0KICAgICAgICBtZXRob2Q6J0RFTEVURScsDQogICAgICAgIHVybDogYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9yZXZpZXcvJHtyZXZpZXdfaWR9LyR7Y29tbWVudF9pZH0vY29tbWVudGRlbGV0ZS9gLA0KICAgICAgICBoZWFkZXJzOiB0aGlzLnNldFRva2VuKCksDQogICAgICB9KQ0KICAgICAgICAudGhlbigoKSA9PnsNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbW1lbnQoKQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIG9uVXBkYXRlKCl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZToiVXBkYXRlUmV2aWV3In0pDQogICAgfSwNCg0KICAgIHVwZGF0ZUNvbW1lbnQoKXsNCiAgICAgIGNvbnN0IHJldmlld19pZCA9IHRoaXMucmV2aWV3LmlkDQogICAgICBheGlvcyh7DQogICAgICAgIG1ldGhvZDonR0VUJywNCiAgICAgICAgdXJsOiBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Jldmlldy8ke3Jldmlld19pZH0vY29tbWVudC9gLA0KICAgICAgICBoZWFkZXJzOiB0aGlzLnNldFRva2VuKCksDQogICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT57DQogICAgICAgICAgdGhpcy5jb21tZW50cyA9IHJlcy5kYXRhDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgfSkNCiAgICB9LA0KDQogICAgY29tbWVudFN1Ym1pdCgpew0KICAgICAgY29uc3QgcmV2aWV3X2lkID0gdGhpcy5yZXZpZXcuaWQNCiAgICAgIGNvbnN0IENvbW1lbnQgPSB7DQogICAgICAgIGNvbnRlbnQ6dGhpcy5jb21tZW50DQogICAgICB9DQogICAgICBheGlvcyh7DQogICAgICAgIG1ldGhvZDonUE9TVCcsDQogICAgICAgIHVybDogYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9yZXZpZXcvJHtyZXZpZXdfaWR9L2NvbW1lbnQvYCwNCiAgICAgICAgaGVhZGVyczogdGhpcy5zZXRUb2tlbigpLA0KICAgICAgICBkYXRhOiBDb21tZW50LA0KICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT57DQogICAgICAgICAgLy8gdGhpcy5jb21tZW50cy5wdXNoKHJlcy5kYXRhKQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29tbWVudCgpDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgfSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKXsNCiAgICB0aGlzLnVwZGF0ZUNvbW1lbnQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["ReviewDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReviewDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <h1>리뷰 제목 : {{ review.title }}</h1>\r\n    <h3>영화 : {{ movieTitle.title }}</h3>\r\n    <p>내용 : {{ review.content }}</p>\r\n    <button @click=\"onUpdate\">수정하기</button>\r\n    <button @click=\"onDelete\">삭제하기</button>\r\n    <div>\r\n      <input type=\"text\" v-model=\"comment\">\r\n      <button @click=\"commentSubmit\">댓글 작성</button>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"(comment,idx) in comments\" :key=\"idx\">\r\n        {{ comment.user }}\r\n        {{ comment.content }}\r\n        <button>수정</button>\r\n        <button @click=\"CommentDelete(comment.id)\">삭제</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  data(){\r\n    return {\r\n      comment:'',\r\n      comments:[],\r\n    }\r\n  },\r\n  computed:{\r\n    review(){\r\n      return this.$store.state.selectReview\r\n    },\r\n    movieTitle(){\r\n      return this.$store.state.movies[this.review.movie]\r\n    }\r\n  },\r\n  methods:{\r\n    setToken: function () {\r\n      const token = localStorage.getItem('jwt')\r\n      const config = {\r\n        Authorization: `JWT ${token}`\r\n      }\r\n      return config\r\n    },\r\n    onDelete(){\r\n      // 1. 게시물 번호찾기\r\n      const review_id = this.review.id\r\n      const movie_id = this.review.movie\r\n      // 2. axios 요청보내기\r\n      axios({\r\n        method:'DELETE',\r\n        url: `http://127.0.0.1:8000/review/${movie_id}/${review_id}/delete/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(res =>{\r\n          console.log(res)\r\n          this.$router.push({name:'Community'})\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    CommentDelete(commentid){\r\n      // 1. 게시물 번호찾기\r\n      const review_id = this.review.id\r\n      const comment_id = commentid\r\n      // 2. axios 요청보내기\r\n      axios({\r\n        method:'DELETE',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/${comment_id}/commentdelete/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(() =>{\r\n          this.updateComment()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    onUpdate(){\r\n      this.$router.push({name:\"UpdateReview\"})\r\n    },\r\n\r\n    updateComment(){\r\n      const review_id = this.review.id\r\n      axios({\r\n        method:'GET',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/comment/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(res =>{\r\n          this.comments = res.data\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    commentSubmit(){\r\n      const review_id = this.review.id\r\n      const Comment = {\r\n        content:this.comment\r\n      }\r\n      axios({\r\n        method:'POST',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/comment/`,\r\n        headers: this.setToken(),\r\n        data: Comment,\r\n      })\r\n        .then(() =>{\r\n          // this.comments.push(res.data)\r\n          this.updateComment()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  created(){\r\n    this.updateComment()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}