{"remainingRequest":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\src\\components\\ReviewDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\src\\components\\ReviewDetail.vue","mtime":1621586447861},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\my_project\\FinalPJT\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50OiAnJywKICAgICAgY29tbWVudHM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJldmlldzogZnVuY3Rpb24gcmV2aWV3KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2VsZWN0UmV2aWV3OwogICAgfSwKICAgIG1vdmllVGl0bGU6IGZ1bmN0aW9uIG1vdmllVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tb3ZpZXNbdGhpcy5yZXZpZXcubW92aWVdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKCkgewogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0Jyk7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkpXVCAiLmNvbmNhdCh0b2tlbikKICAgICAgfTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH0sCiAgICBvbkRlbGV0ZTogZnVuY3Rpb24gb25EZWxldGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyAxLiDqsozsi5zrrLwg67KI7Zi47LC+6riwCiAgICAgIHZhciByZXZpZXdfaWQgPSB0aGlzLnJldmlldy5pZDsKICAgICAgdmFyIG1vdmllX2lkID0gdGhpcy5yZXZpZXcubW92aWU7IC8vIDIuIGF4aW9zIOyalOyyreuztOuCtOq4sAoKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogJ0RFTEVURScsCiAgICAgICAgdXJsOiAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Jldmlldy8iLmNvbmNhdChtb3ZpZV9pZCwgIi8iKS5jb25jYXQocmV2aWV3X2lkLCAiL2RlbGV0ZS8iKSwKICAgICAgICBoZWFkZXJzOiB0aGlzLnNldFRva2VuKCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdDb21tdW5pdHknCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBDb21tZW50RGVsZXRlOiBmdW5jdGlvbiBDb21tZW50RGVsZXRlKGNvbW1lbnRpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIDEuIOqyjOyLnOusvCDrsojtmLjssL7quLAKICAgICAgdmFyIHJldmlld19pZCA9IHRoaXMucmV2aWV3LmlkOwogICAgICB2YXIgY29tbWVudF9pZCA9IGNvbW1lbnRpZDsgLy8gMi4gYXhpb3Mg7JqU7LKt67O064K06riwCgogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICB1cmw6ICJodHRwOi8vMTI3LjAuMC4xOjgwMDAvcmV2aWV3LyIuY29uY2F0KHJldmlld19pZCwgIi8iKS5jb25jYXQoY29tbWVudF9pZCwgIi9jb21tZW50ZGVsZXRlLyIpLAogICAgICAgIGhlYWRlcnM6IHRoaXMuc2V0VG9rZW4oKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIudXBkYXRlQ29tbWVudCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIlVwZGF0ZVJldmlldyIKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlQ29tbWVudDogZnVuY3Rpb24gdXBkYXRlQ29tbWVudCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgcmV2aWV3X2lkID0gdGhpcy5yZXZpZXcuaWQ7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9yZXZpZXcvIi5jb25jYXQocmV2aWV3X2lkLCAiL2NvbW1lbnQvIiksCiAgICAgICAgaGVhZGVyczogdGhpcy5zZXRUb2tlbigpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5jb21tZW50cyA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgY29tbWVudFN1Ym1pdDogZnVuY3Rpb24gY29tbWVudFN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgcmV2aWV3X2lkID0gdGhpcy5yZXZpZXcuaWQ7CiAgICAgIHZhciBDb21tZW50ID0gewogICAgICAgIGNvbnRlbnQ6IHRoaXMuY29tbWVudAogICAgICB9OwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgdXJsOiAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Jldmlldy8iLmNvbmNhdChyZXZpZXdfaWQsICIvY29tbWVudC8iKSwKICAgICAgICBoZWFkZXJzOiB0aGlzLnNldFRva2VuKCksCiAgICAgICAgZGF0YTogQ29tbWVudAogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyB0aGlzLmNvbW1lbnRzLnB1c2gocmVzLmRhdGEpCiAgICAgICAgX3RoaXM0LnVwZGF0ZUNvbW1lbnQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudXBkYXRlQ29tbWVudCgpOwogIH0KfTs="},{"version":3,"sources":["ReviewDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <h1>리뷰 제목 : {{ review.title }}</h1>\r\n    <h3>영화 : {{ movieTitle.title }}</h3>\r\n    <p>내용 : {{ review.content }}</p>\r\n    <button @click=\"onUpdate\">수정하기</button>\r\n    <button @click=\"onDelete\">삭제하기</button>\r\n    <div>\r\n      <input type=\"text\" v-model=\"comment\">\r\n      <button @click=\"commentSubmit\">댓글 작성</button>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"(comment,idx) in comments\" :key=\"idx\">\r\n        {{ comment.user }}\r\n        {{ comment.content }}\r\n        <button>수정</button>\r\n        <button @click=\"CommentDelete(comment.id)\">삭제</button>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  data(){\r\n    return {\r\n      comment:'',\r\n      comments:[],\r\n    }\r\n  },\r\n  computed:{\r\n    review(){\r\n      return this.$store.state.selectReview\r\n    },\r\n    movieTitle(){\r\n      return this.$store.state.movies[this.review.movie]\r\n    }\r\n  },\r\n  methods:{\r\n    setToken: function () {\r\n      const token = localStorage.getItem('jwt')\r\n      const config = {\r\n        Authorization: `JWT ${token}`\r\n      }\r\n      return config\r\n    },\r\n    onDelete(){\r\n      // 1. 게시물 번호찾기\r\n      const review_id = this.review.id\r\n      const movie_id = this.review.movie\r\n      // 2. axios 요청보내기\r\n      axios({\r\n        method:'DELETE',\r\n        url: `http://127.0.0.1:8000/review/${movie_id}/${review_id}/delete/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(res =>{\r\n          console.log(res)\r\n          this.$router.push({name:'Community'})\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    CommentDelete(commentid){\r\n      // 1. 게시물 번호찾기\r\n      const review_id = this.review.id\r\n      const comment_id = commentid\r\n      // 2. axios 요청보내기\r\n      axios({\r\n        method:'DELETE',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/${comment_id}/commentdelete/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(() =>{\r\n          this.updateComment()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    onUpdate(){\r\n      this.$router.push({name:\"UpdateReview\"})\r\n    },\r\n\r\n    updateComment(){\r\n      const review_id = this.review.id\r\n      axios({\r\n        method:'GET',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/comment/`,\r\n        headers: this.setToken(),\r\n      })\r\n        .then(res =>{\r\n          this.comments = res.data\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    commentSubmit(){\r\n      const review_id = this.review.id\r\n      const Comment = {\r\n        content:this.comment\r\n      }\r\n      axios({\r\n        method:'POST',\r\n        url: `http://127.0.0.1:8000/review/${review_id}/comment/`,\r\n        headers: this.setToken(),\r\n        data: Comment,\r\n      })\r\n        .then(() =>{\r\n          // this.comments.push(res.data)\r\n          this.updateComment()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  },\r\n  created(){\r\n    this.updateComment()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/components"}]}